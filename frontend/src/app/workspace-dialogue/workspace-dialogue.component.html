<div fxLayout="row" class="workspace-title">
<h2 mat-dialog-title >{{mservice.service | headingPipe}}</h2>
<app-btn [label]=" 'Create Branch' " (clicked)="sendMergeRequest()" *ngIf="sendMR" class="merge-btn"></app-btn>
</div>


<mat-dialog-content class="mat-typography">

  <div fxLayout="row" fxLayoutAlign="start center">
      <app-dropdown [dropdownList]="functionList" [label]=" 'FUNCTION' " [disabled]="visibleProgressSpinner" (change)="setFunction($event)" ></app-dropdown>
      <app-dropdown [dropdownList]="branchList" [label]=" 'BRANCH' " [disabled]="visibleProgressSpinner" [defaultValue]="branchValue" (change)="setBranch($event)" *ngIf="isBranchReq" ></app-dropdown>
      <app-dropdown [dropdownList]="branchList" [label]=" 'SOURCE' " [disabled]="visibleProgressSpinner" [defaultValue]="sourceBranchValue" (change)="setSourceBranch($event)" *ngIf="isBranch2Req" ></app-dropdown>
      <app-dropdown [dropdownList]="branchList" [label]=" 'DESTINATION' " [disabled]="visibleProgressSpinner" [defaultValue]="destinationBranchValue" (change)="setDestinationBranch($event)" *ngIf="isBranch1Req" ></app-dropdown>
      <app-profile-input [mservice]="mservice" [canProfileDefault]="canProfileDefault" [defaultValue]="profileValue" [disabled]="visibleProgressSpinner" (profile_sent)="setProfile($event)" *ngIf="isProfileReq"></app-profile-input>
      <app-dropdown [dropdownList]="inconsistentProfiles" [label]=" 'PROFILE' " [disabled]="visibleProgressSpinner" [defaultValue]="ICP" (change)="setICP($event)" *ngIf="isProfileConsistency"></app-dropdown>
      <app-btn (clicked)="processFunction()" [label]=" 'Show' " [disabled]="visibleProgressSpinner" *ngIf="showBtn"></app-btn>
      <span style="color:red; margin-left:16px;" *ngIf="!reqValidation">Please fill the required fields*</span>
      <mat-progress-spinner mode="indeterminate" diameter="30" [hidden]="!visibleProgressSpinner" style="margin-left:16px;"></mat-progress-spinner>    
  </div>
  <!-- Showing the contents accordingly -->
  <div fxLayout="row">
    <app-custom-codemirror [content]="displayData" [id]=" 'custom' " 
    [propertyList]="propertyList" [ownerList]="ownerList" 
    [cmp]="chosenMissingProperty"
    [isEditable]="isEditable"
    (modifyProfileData) = "modifyProfileData($event)"
    *ngIf="!isBranchConsistency && !customValidateComponent"
    [ngClass]="{'full-width-editor':missingProperties.length===0, 'partial-width-editor':missingProperties.length>0}">

    </app-custom-codemirror>

    
    <app-dropdown [dropdownList]="missingProperties" [label]=" 'Missing Properties' " (change)="populateMissingProperty($event)"   
    *ngIf="missingProperties.length>0" style="margin-left: 15px;"></app-dropdown>
    <!--<app-custom-codemirror fxFlex [content]="displayData2" [id]=" 'custom2' " [propertyList]="propertyList" [ownerList]="ownerList" [differenceProperties]="differenceProperties" *ngIf="isBranch2Req"></app-custom-codemirror>-->
    <app-monaco-editor fxFlex [data1]="displayData" [data2]="sourceData" (modifySourceData)="modifySourceData($event)" *ngIf="isBranchConsistency"></app-monaco-editor>
    <!--<app-custom-validate-report fxFlex [service]="mservice.service" [branch]="branchValue" [profile]="profileValue"
     *ngIf="customValidateComponent" (gotCVReport)="visibleProgressSpinner=false"></app-custom-validate-report>-->
    <div fxFlex class="container table-container" *ngIf="customValidateComponent">
      <table mat-table [dataSource]="dataSource" class="mat-elevation-z8" *ngIf="showTable===1">
        <ng-container matColumnDef="position">
            <th mat-header-cell *matHeaderCellDef> No. </th>
            <td mat-cell *matCellDef="let element"> {{element.position}} </td>
        </ng-container>

        <ng-container matColumnDef="parentProperty">
            <th mat-header-cell *matHeaderCellDef> Parent Property </th>
            <td mat-cell *matCellDef="let element"> {{element.parentProperty}} </td>
        </ng-container>
    
        <ng-container matColumnDef="property">
            <th mat-header-cell *matHeaderCellDef> Property </th>
            <td mat-cell *matCellDef="let element"> {{element.property}} </td>
        </ng-container>
    
        <ng-container matColumnDef="errorMsg">
            <th mat-header-cell *matHeaderCellDef> Error </th>
            <td mat-cell *matCellDef="let element"> {{element.errorMsg}} </td>
        </ng-container>
    
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    
      </table>
    
      <div *ngIf="showTable===0">
          <h1>No Errors Present</h1>
      </div>
    </div>
  </div>
  

</mat-dialog-content>


<mat-dialog-actions align="end">
  <app-btn [label]=" 'Keep Changes' " (clicked)="keepChangesClicked()" *ngIf="keepChanges"></app-btn>
  <app-btn [label]=" 'Discard Changes' " (clicked)="discardChangesClicked()" *ngIf="discardChanges"></app-btn>
  <app-btn [label]=" 'Cancel' " [isCancel] = "true" (clicked)="closeWorkspace()" [icon]="'cancel'"></app-btn>
</mat-dialog-actions>

