<div fxLayout="row" class="add-rule-title">
    <h2 mat-dialog-title >Add Rule</h2>
</div>

<div fxLayout="row">
    <app-custom-codemirror fxFlex [id]=" 'rule' "
    [codemirrorMode]="editorMode"
    (modifyProfileData) = "modifyProfileData($event)">
    </app-custom-codemirror>
</div>

<mat-dialog-content>
    <form>
        <div class="mb-3">
            <mat-form-field class="example-full-width">
              <mat-label><span class="text-danger mr-1">*</span>RULE ON PROPERTY</mat-label>
              <input matInput placeholder="Enter Property" [(ngModel)]="nRule.ruleOnProperty" name="property">
            </mat-form-field>
            <div style="height:20px;">
              <span *ngIf="!isRuleOnPropertyValid" class="text-danger">
                Please enter service name
              </span>
            </div>
        </div>
        <div class="mb-3">
            <mat-form-field appearance="fill">
                <mat-label>SERVICES</mat-label>
                <mat-select [formControl]="servicesSelected" multiple>
                    {{setFunction()}}
                    <mat-option *ngFor="let service of serviceList" [value]="service">{{service}}</mat-option>
                </mat-select>
            </mat-form-field>
            <div style="height:20px;">
                <span *ngIf="!isServiceValid" class="text-danger">
                  Please select branches
                </span>
            </div>
        </div>
        <div class="mb-3">
            <mat-form-field appearance="fill">
                <mat-label>BRANCHES</mat-label>
                <mat-select [formControl]="branchesSelected" multiple>
                    <mat-option *ngFor="let branch of branchList" [value]="branch">{{branch}}</mat-option>
                </mat-select>
            </mat-form-field>
            <div style="height:20px;">
            </div>
        </div>
        <div class="mb-3">
            <mat-form-field appearance="fill">
                <mat-label>PROFILES</mat-label>
                <mat-select [formControl]="profilesSelected" multiple>
                    <mat-option *ngFor="let profile of profileList" [value]="profile">{{profile}}</mat-option>
                </mat-select>
            </mat-form-field>
            <div style="height:20px;">
            </div>
        </div>
    </form>
</mat-dialog-content>

<mat-dialog-actions align="end">
    <app-btn mat-dialog-close [label]=" 'Cancel' " [isCancel]="true"></app-btn> 
    <app-btn (clicked)="addNewRule()" [label]=" 'Add' " cdkFocusInitial></app-btn>
</mat-dialog-actions>